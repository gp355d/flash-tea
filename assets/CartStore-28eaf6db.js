import{d}from"./pinia-7d28dea6.js";import{a}from"./axios-08622986.js";import{S as o}from"./sweetalert2-fc38d252.js";const l=d("status",{state:()=>({loadingItem:"",isLoading:!1})}),c=l(),{VITE_APP_URL:i,VITE_APP_PATH:s}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"leo533",BASE_URL:"/flash-tea/",MODE:"production",DEV:!1,PROD:!0},p=d("cart",{state:()=>({carts:[],cartNUm:0,total:0,final_total:0,loadingItem:"",isLoading:!1,coupon_Name:"",discocount:0}),actions:{getCarts(){c.isLoading=!0,a.get(`${i}v2/api/${s}/cart`).then(t=>{const{data:e}=t.data;this.carts=e,this.cartNUm=e.carts.length,this.total=t.data.data.total,this.final_total=t.data.data.final_total,c.isLoading=!1})},addToCart(t,e=1){const n={data:{product_id:t,qty:e}};this.loadingItem=t+"1",a.post(`${i}v2/api/${s}/cart`,n).then(r=>{this.getCarts(),o.fire({position:"top-end",icon:"success",title:r.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""}).catch(r=>{o.fire({position:"top-end",icon:"error",title:r.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""})},clearCart(){o.fire({title:"確認是否要清空購物車?",text:"此動作將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#46633D",cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(t=>{t.isConfirmed&&(this.loadingItem="deleteAll",a.delete(`${i}v2/api/${s}/carts`).then(()=>{this.getCarts(),this.loadingItem="",o.fire({position:"top-end",icon:"success",title:"購物車已清空",showConfirmButton:!1,timer:1500})}).catch(e=>{o.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""}))})},updateCartItem(t){const e={product_id:t.product.id,qty:t.qty};this.loadingItem=t.id,a.put(`${i}v2/api/${s}/cart/${t.id}`,{data:e}).then(n=>{this.getCarts(),this.loadingItem="",o.fire({position:"top-end",icon:"success",title:"商品數量已更新！",showConfirmButton:!1,timer:1500})}).catch(n=>{o.fire({position:"top-end",icon:"error",title:n.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""})},deleteItem(t){this.loadingItem=t.id,a.delete(`${i}v2/api/${s}/cart/${t.id}`).then(e=>{o.fire({position:"top-end",icon:"success",title:`該商品${e.data.message}`,showConfirmButton:!1,timer:1500}),this.loadingItem="",this.getCarts()}).catch(e=>{o.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500}),this.loadingItem=""})}}});export{p as c,l as s};
